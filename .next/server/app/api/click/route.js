"use strict";
/*
 * ATTENTION: An "eval-source-map" devtool has been used.
 * This devtool is neither made for production nor for readable output files.
 * It uses "eval()" calls to create a separate source file with attached SourceMaps in the browser devtools.
 * If you are trying to read the output file, select a different devtool (https://webpack.js.org/configuration/devtool/)
 * or disable the default devtool with "devtool: false".
 * If you are looking for production-ready output files, see mode: "production" (https://webpack.js.org/configuration/mode/).
 */
(() => {
var exports = {};
exports.id = "app/api/click/route";
exports.ids = ["app/api/click/route"];
exports.modules = {

/***/ "next/dist/compiled/next-server/app-page.runtime.dev.js":
/*!*************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-page.runtime.dev.js" ***!
  \*************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-page.runtime.dev.js");

/***/ }),

/***/ "next/dist/compiled/next-server/app-route.runtime.dev.js":
/*!**************************************************************************!*\
  !*** external "next/dist/compiled/next-server/app-route.runtime.dev.js" ***!
  \**************************************************************************/
/***/ ((module) => {

module.exports = require("next/dist/compiled/next-server/app-route.runtime.dev.js");

/***/ }),

/***/ "(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclick%2Froute&page=%2Fapi%2Fclick%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclick%2Froute.js&appDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Ccardzy%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Ccardzy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!":
/*!***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************!*\
  !*** ./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclick%2Froute&page=%2Fapi%2Fclick%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclick%2Froute.js&appDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Ccardzy%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Ccardzy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D! ***!
  \***************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************************/
/***/ ((__unused_webpack_module, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   originalPathname: () => (/* binding */ originalPathname),\n/* harmony export */   patchFetch: () => (/* binding */ patchFetch),\n/* harmony export */   requestAsyncStorage: () => (/* binding */ requestAsyncStorage),\n/* harmony export */   routeModule: () => (/* binding */ routeModule),\n/* harmony export */   serverHooks: () => (/* binding */ serverHooks),\n/* harmony export */   staticGenerationAsyncStorage: () => (/* binding */ staticGenerationAsyncStorage)\n/* harmony export */ });\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/dist/server/future/route-modules/app-route/module.compiled */ \"(rsc)/./node_modules/next/dist/server/future/route-modules/app-route/module.compiled.js\");\n/* harmony import */ var next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! next/dist/server/future/route-kind */ \"(rsc)/./node_modules/next/dist/server/future/route-kind.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! next/dist/server/lib/patch-fetch */ \"(rsc)/./node_modules/next/dist/server/lib/patch-fetch.js\");\n/* harmony import */ var next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2___default = /*#__PURE__*/__webpack_require__.n(next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__);\n/* harmony import */ var C_Users_LENOVO_Desktop_cardzy_app_api_click_route_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./app/api/click/route.js */ \"(rsc)/./app/api/click/route.js\");\n\n\n\n\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new next_dist_server_future_route_modules_app_route_module_compiled__WEBPACK_IMPORTED_MODULE_0__.AppRouteRouteModule({\n    definition: {\n        kind: next_dist_server_future_route_kind__WEBPACK_IMPORTED_MODULE_1__.RouteKind.APP_ROUTE,\n        page: \"/api/click/route\",\n        pathname: \"/api/click\",\n        filename: \"route\",\n        bundlePath: \"app/api/click/route\"\n    },\n    resolvedPagePath: \"C:\\\\Users\\\\LENOVO\\\\Desktop\\\\cardzy\\\\app\\\\api\\\\click\\\\route.js\",\n    nextConfigOutput,\n    userland: C_Users_LENOVO_Desktop_cardzy_app_api_click_route_js__WEBPACK_IMPORTED_MODULE_3__\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { requestAsyncStorage, staticGenerationAsyncStorage, serverHooks } = routeModule;\nconst originalPathname = \"/api/click/route\";\nfunction patchFetch() {\n    return (0,next_dist_server_lib_patch_fetch__WEBPACK_IMPORTED_MODULE_2__.patchFetch)({\n        serverHooks,\n        staticGenerationAsyncStorage\n    });\n}\n\n\n//# sourceMappingURL=app-route.js.map//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9ub2RlX21vZHVsZXMvbmV4dC9kaXN0L2J1aWxkL3dlYnBhY2svbG9hZGVycy9uZXh0LWFwcC1sb2FkZXIuanM/bmFtZT1hcHAlMkZhcGklMkZjbGljayUyRnJvdXRlJnBhZ2U9JTJGYXBpJTJGY2xpY2slMkZyb3V0ZSZhcHBQYXRocz0mcGFnZVBhdGg9cHJpdmF0ZS1uZXh0LWFwcC1kaXIlMkZhcGklMkZjbGljayUyRnJvdXRlLmpzJmFwcERpcj1DJTNBJTVDVXNlcnMlNUNMRU5PVk8lNUNEZXNrdG9wJTVDY2FyZHp5JTVDYXBwJnBhZ2VFeHRlbnNpb25zPXRzeCZwYWdlRXh0ZW5zaW9ucz10cyZwYWdlRXh0ZW5zaW9ucz1qc3gmcGFnZUV4dGVuc2lvbnM9anMmcm9vdERpcj1DJTNBJTVDVXNlcnMlNUNMRU5PVk8lNUNEZXNrdG9wJTVDY2FyZHp5JmlzRGV2PXRydWUmdHNjb25maWdQYXRoPXRzY29uZmlnLmpzb24mYmFzZVBhdGg9JmFzc2V0UHJlZml4PSZuZXh0Q29uZmlnT3V0cHV0PSZwcmVmZXJyZWRSZWdpb249Jm1pZGRsZXdhcmVDb25maWc9ZTMwJTNEISIsIm1hcHBpbmdzIjoiOzs7Ozs7Ozs7Ozs7Ozs7QUFBc0c7QUFDdkM7QUFDYztBQUNhO0FBQzFGO0FBQ0E7QUFDQTtBQUNBLHdCQUF3QixnSEFBbUI7QUFDM0M7QUFDQSxjQUFjLHlFQUFTO0FBQ3ZCO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsS0FBSztBQUNMO0FBQ0E7QUFDQSxZQUFZO0FBQ1osQ0FBQztBQUNEO0FBQ0E7QUFDQTtBQUNBLFFBQVEsaUVBQWlFO0FBQ3pFO0FBQ0E7QUFDQSxXQUFXLDRFQUFXO0FBQ3RCO0FBQ0E7QUFDQSxLQUFLO0FBQ0w7QUFDdUg7O0FBRXZIIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyZHp5Lz8xMzk2Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IEFwcFJvdXRlUm91dGVNb2R1bGUgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUtbW9kdWxlcy9hcHAtcm91dGUvbW9kdWxlLmNvbXBpbGVkXCI7XG5pbXBvcnQgeyBSb3V0ZUtpbmQgfSBmcm9tIFwibmV4dC9kaXN0L3NlcnZlci9mdXR1cmUvcm91dGUta2luZFwiO1xuaW1wb3J0IHsgcGF0Y2hGZXRjaCBhcyBfcGF0Y2hGZXRjaCB9IGZyb20gXCJuZXh0L2Rpc3Qvc2VydmVyL2xpYi9wYXRjaC1mZXRjaFwiO1xuaW1wb3J0ICogYXMgdXNlcmxhbmQgZnJvbSBcIkM6XFxcXFVzZXJzXFxcXExFTk9WT1xcXFxEZXNrdG9wXFxcXGNhcmR6eVxcXFxhcHBcXFxcYXBpXFxcXGNsaWNrXFxcXHJvdXRlLmpzXCI7XG4vLyBXZSBpbmplY3QgdGhlIG5leHRDb25maWdPdXRwdXQgaGVyZSBzbyB0aGF0IHdlIGNhbiB1c2UgdGhlbSBpbiB0aGUgcm91dGVcbi8vIG1vZHVsZS5cbmNvbnN0IG5leHRDb25maWdPdXRwdXQgPSBcIlwiXG5jb25zdCByb3V0ZU1vZHVsZSA9IG5ldyBBcHBSb3V0ZVJvdXRlTW9kdWxlKHtcbiAgICBkZWZpbml0aW9uOiB7XG4gICAgICAgIGtpbmQ6IFJvdXRlS2luZC5BUFBfUk9VVEUsXG4gICAgICAgIHBhZ2U6IFwiL2FwaS9jbGljay9yb3V0ZVwiLFxuICAgICAgICBwYXRobmFtZTogXCIvYXBpL2NsaWNrXCIsXG4gICAgICAgIGZpbGVuYW1lOiBcInJvdXRlXCIsXG4gICAgICAgIGJ1bmRsZVBhdGg6IFwiYXBwL2FwaS9jbGljay9yb3V0ZVwiXG4gICAgfSxcbiAgICByZXNvbHZlZFBhZ2VQYXRoOiBcIkM6XFxcXFVzZXJzXFxcXExFTk9WT1xcXFxEZXNrdG9wXFxcXGNhcmR6eVxcXFxhcHBcXFxcYXBpXFxcXGNsaWNrXFxcXHJvdXRlLmpzXCIsXG4gICAgbmV4dENvbmZpZ091dHB1dCxcbiAgICB1c2VybGFuZFxufSk7XG4vLyBQdWxsIG91dCB0aGUgZXhwb3J0cyB0aGF0IHdlIG5lZWQgdG8gZXhwb3NlIGZyb20gdGhlIG1vZHVsZS4gVGhpcyBzaG91bGRcbi8vIGJlIGVsaW1pbmF0ZWQgd2hlbiB3ZSd2ZSBtb3ZlZCB0aGUgb3RoZXIgcm91dGVzIHRvIHRoZSBuZXcgZm9ybWF0LiBUaGVzZVxuLy8gYXJlIHVzZWQgdG8gaG9vayBpbnRvIHRoZSByb3V0ZS5cbmNvbnN0IHsgcmVxdWVzdEFzeW5jU3RvcmFnZSwgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZSwgc2VydmVySG9va3MgfSA9IHJvdXRlTW9kdWxlO1xuY29uc3Qgb3JpZ2luYWxQYXRobmFtZSA9IFwiL2FwaS9jbGljay9yb3V0ZVwiO1xuZnVuY3Rpb24gcGF0Y2hGZXRjaCgpIHtcbiAgICByZXR1cm4gX3BhdGNoRmV0Y2goe1xuICAgICAgICBzZXJ2ZXJIb29rcyxcbiAgICAgICAgc3RhdGljR2VuZXJhdGlvbkFzeW5jU3RvcmFnZVxuICAgIH0pO1xufVxuZXhwb3J0IHsgcm91dGVNb2R1bGUsIHJlcXVlc3RBc3luY1N0b3JhZ2UsIHN0YXRpY0dlbmVyYXRpb25Bc3luY1N0b3JhZ2UsIHNlcnZlckhvb2tzLCBvcmlnaW5hbFBhdGhuYW1lLCBwYXRjaEZldGNoLCAgfTtcblxuLy8jIHNvdXJjZU1hcHBpbmdVUkw9YXBwLXJvdXRlLmpzLm1hcCJdLCJuYW1lcyI6W10sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclick%2Froute&page=%2Fapi%2Fclick%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclick%2Froute.js&appDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Ccardzy%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Ccardzy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!\n");

/***/ }),

/***/ "(rsc)/./app/api/click/route.js":
/*!********************************!*\
  !*** ./app/api/click/route.js ***!
  \********************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   POST: () => (/* binding */ POST),\n/* harmony export */   dynamic: () => (/* binding */ dynamic)\n/* harmony export */ });\n/* harmony import */ var next_server__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! next/server */ \"(rsc)/./node_modules/next/dist/api/server.js\");\n/* harmony import */ var _lib_board_js__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ../../../lib/board.js */ \"(rsc)/./lib/board.js\");\n/* harmony import */ var _lib_helpers_js__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../../../lib/helpers.js */ \"(rsc)/./lib/helpers.js\");\n/* harmony import */ var _lib_supabase_js__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ../../../lib/supabase.js */ \"(rsc)/./lib/supabase.js\");\nconst dynamic = \"force-dynamic\";\n\n\n\n\nasync function POST(req) {\n    try {\n        const user = await (0,_lib_supabase_js__WEBPACK_IMPORTED_MODULE_3__.getUserFromReq)(req);\n        if (!user) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"unauthorized\"\n        }, {\n            status: 401\n        });\n        const body = await req.json();\n        const index = Number(body.index);\n        if (Number.isNaN(index)) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"invalid input\"\n        }, {\n            status: 400\n        });\n        const { data: state, error } = await (0,_lib_supabase_js__WEBPACK_IMPORTED_MODULE_3__.getGameState)(user.id);\n        if (error) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"db error\",\n            detail: error.message\n        }, {\n            status: 500\n        });\n        if (!state) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"not found\"\n        }, {\n            status: 404\n        });\n        let board = state.board;\n        const before = JSON.stringify(board);\n        board = (0,_lib_board_js__WEBPACK_IMPORTED_MODULE_1__.flipTile)(board, index);\n        let moves = state.moves;\n        if (JSON.stringify(board) !== before) moves += 1;\n        const open = (0,_lib_board_js__WEBPACK_IMPORTED_MODULE_1__.getOpenIndices)(board);\n        const matchedPairs = [];\n        for (const t of board)if (t.matched) matchedPairs.push(t.pairId);\n        const matchedSet = Array.from(new Set(matchedPairs));\n        if (open.length === 2) {\n            const updated_at = (0,_lib_helpers_js__WEBPACK_IMPORTED_MODULE_2__.nowIso)();\n            const sErr = await (0,_lib_supabase_js__WEBPACK_IMPORTED_MODULE_3__.upsertGameState)({\n                user_id: user.id,\n                board: (0,_lib_board_js__WEBPACK_IMPORTED_MODULE_1__.serializeBoard)(board),\n                matched: matchedSet,\n                moves,\n                time_started: state.time_started,\n                updated_at\n            });\n            if (sErr.error) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"db error\",\n                detail: sErr.error.message\n            }, {\n                status: 500\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                board: (0,_lib_board_js__WEBPACK_IMPORTED_MODULE_1__.serializeBoard)(board),\n                matched: matchedSet,\n                moves,\n                completed: false,\n                needs_resolution: true\n            });\n        }\n        const completed = (0,_lib_board_js__WEBPACK_IMPORTED_MODULE_1__.isCompleted)(board);\n        if (completed) {\n            const end = (0,_lib_helpers_js__WEBPACK_IMPORTED_MODULE_2__.nowIso)();\n            const secs = (0,_lib_helpers_js__WEBPACK_IMPORTED_MODULE_2__.elapsedSeconds)(state.time_started, end);\n            // Get profile for username\n            const { data: profile } = await (0,_lib_supabase_js__WEBPACK_IMPORTED_MODULE_3__.getProfile)(user.id);\n            const username = profile?.username || \"Unknown\";\n            const row = {\n                user_id: user.id,\n                username,\n                wins: 1,\n                best_time: secs,\n                best_moves: moves,\n                last_played: end\n            };\n            const supabase = (0,_lib_supabase_js__WEBPACK_IMPORTED_MODULE_3__.getSupabaseServerClient)();\n            const { data: prev, error: prevErr } = await supabase.from(\"leaderboard\").select(\"*\").eq(\"user_id\", user.id).maybeSingle();\n            if (prevErr) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"db error\",\n                detail: prevErr.message\n            }, {\n                status: 500\n            });\n            if (prev) {\n                row.wins = (prev.wins || 0) + 1;\n                row.best_time = prev.best_time == null ? secs : Math.min(prev.best_time, secs);\n                row.best_moves = prev.best_moves == null ? moves : Math.min(prev.best_moves, moves);\n            }\n            const lErr = await (0,_lib_supabase_js__WEBPACK_IMPORTED_MODULE_3__.upsertLeaderboardRow)(row);\n            if (lErr.error) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"db error\",\n                detail: lErr.error.message\n            }, {\n                status: 500\n            });\n            const dErr = await (0,_lib_supabase_js__WEBPACK_IMPORTED_MODULE_3__.deleteGameState)(user.id);\n            if (dErr.error) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"db error\",\n                detail: dErr.error.message\n            }, {\n                status: 500\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                board: (0,_lib_board_js__WEBPACK_IMPORTED_MODULE_1__.serializeBoard)(board),\n                matched: matchedSet,\n                moves,\n                completed: true\n            });\n        } else {\n            const updated_at = (0,_lib_helpers_js__WEBPACK_IMPORTED_MODULE_2__.nowIso)();\n            const sErr = await (0,_lib_supabase_js__WEBPACK_IMPORTED_MODULE_3__.upsertGameState)({\n                user_id: user.id,\n                board: (0,_lib_board_js__WEBPACK_IMPORTED_MODULE_1__.serializeBoard)(board),\n                matched: matchedSet,\n                moves,\n                time_started: state.time_started,\n                updated_at\n            });\n            if (sErr.error) return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                error: \"db error\",\n                detail: sErr.error.message\n            }, {\n                status: 500\n            });\n            return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n                board: (0,_lib_board_js__WEBPACK_IMPORTED_MODULE_1__.serializeBoard)(board),\n                matched: matchedSet,\n                moves,\n                completed: false\n            });\n        }\n    } catch (e) {\n        return next_server__WEBPACK_IMPORTED_MODULE_0__.NextResponse.json({\n            error: \"bad request\"\n        }, {\n            status: 400\n        });\n    }\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QSxDQUFDaUIsSUFBSSxDQUFDO2dCQUFFQyxPQUFPO2dCQUFZUyxRQUFRMEMsS0FBS25ELEtBQUssQ0FBQ1UsT0FBTztZQUFDLEdBQUc7Z0JBQUVULFFBQVE7WUFBSTtZQUUxRyxPQUFPbkIscURBQVlBLENBQUNpQixJQUFJLENBQUM7Z0JBQUVZLE9BQU96Qiw2REFBY0EsQ0FBQ3lCO2dCQUFRUSxTQUFTRztnQkFBWVA7Z0JBQU9nQixXQUFXO1lBQUs7UUFDdkcsT0FBTztZQUNMLE1BQU1KLGFBQWF4Qyx1REFBTUE7WUFDekIsTUFBTXlDLE9BQU8sTUFBTXRDLGlFQUFlQSxDQUFDO2dCQUNqQ3VDLFNBQVMvQixLQUFLVSxFQUFFO2dCQUNoQkcsT0FBT3pCLDZEQUFjQSxDQUFDeUI7Z0JBQ3RCUSxTQUFTRztnQkFDVFA7Z0JBQ0FlLGNBQWN2QixNQUFNdUIsWUFBWTtnQkFDaENIO1lBQ0Y7WUFDQSxJQUFJQyxLQUFLNUIsS0FBSyxFQUFFLE9BQU9sQixxREFBWUEsQ0FBQ2lCLElBQUksQ0FBQztnQkFBRUMsT0FBTztnQkFBWVMsUUFBUW1CLEtBQUs1QixLQUFLLENBQUNVLE9BQU87WUFBQyxHQUFHO2dCQUFFVCxRQUFRO1lBQUk7WUFDMUcsT0FBT25CLHFEQUFZQSxDQUFDaUIsSUFBSSxDQUFDO2dCQUFFWSxPQUFPekIsNkRBQWNBLENBQUN5QjtnQkFBUVEsU0FBU0c7Z0JBQVlQO2dCQUFPZ0IsV0FBVztZQUFNO1FBQ3hHO0lBQ0YsRUFBRSxPQUFPcUIsR0FBRztRQUNWLE9BQU90RSxxREFBWUEsQ0FBQ2lCLElBQUksQ0FBQztZQUFFQyxPQUFPO1FBQWMsR0FBRztZQUFFQyxRQUFRO1FBQUk7SUFDbkU7QUFDRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NhcmR6eS8uL2FwcC9hcGkvY2xpY2svcm91dGUuanM/NzhmMSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgY29uc3QgZHluYW1pYyA9ICdmb3JjZS1keW5hbWljJ1xuaW1wb3J0IHsgTmV4dFJlc3BvbnNlIH0gZnJvbSAnbmV4dC9zZXJ2ZXInXG5pbXBvcnQgeyBmbGlwVGlsZSwgZ2V0T3BlbkluZGljZXMsIGlzQ29tcGxldGVkLCBzZXJpYWxpemVCb2FyZCB9IGZyb20gJy4uLy4uLy4uL2xpYi9ib2FyZC5qcydcbmltcG9ydCB7IG5vd0lzbywgZWxhcHNlZFNlY29uZHMgfSBmcm9tICcuLi8uLi8uLi9saWIvaGVscGVycy5qcydcbmltcG9ydCB7IGdldEdhbWVTdGF0ZSwgdXBzZXJ0R2FtZVN0YXRlLCBkZWxldGVHYW1lU3RhdGUsIHVwc2VydExlYWRlcmJvYXJkUm93LCBnZXRTdXBhYmFzZVNlcnZlckNsaWVudCwgZ2V0VXNlckZyb21SZXEsIGdldFByb2ZpbGUgfSBmcm9tICcuLi8uLi8uLi9saWIvc3VwYWJhc2UuanMnXG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBQT1NUKHJlcSkge1xuICB0cnkge1xuICAgIGNvbnN0IHVzZXIgPSBhd2FpdCBnZXRVc2VyRnJvbVJlcShyZXEpXG4gICAgaWYgKCF1c2VyKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ3VuYXV0aG9yaXplZCcgfSwgeyBzdGF0dXM6IDQwMSB9KVxuXG4gICAgY29uc3QgYm9keSA9IGF3YWl0IHJlcS5qc29uKClcbiAgICBjb25zdCBpbmRleCA9IE51bWJlcihib2R5LmluZGV4KVxuICAgIGlmIChOdW1iZXIuaXNOYU4oaW5kZXgpKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ2ludmFsaWQgaW5wdXQnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgICBcbiAgICBjb25zdCB7IGRhdGE6IHN0YXRlLCBlcnJvciB9ID0gYXdhaXQgZ2V0R2FtZVN0YXRlKHVzZXIuaWQpXG4gICAgaWYgKGVycm9yKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ2RiIGVycm9yJywgZGV0YWlsOiBlcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgICBpZiAoIXN0YXRlKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ25vdCBmb3VuZCcgfSwgeyBzdGF0dXM6IDQwNCB9KVxuICAgIFxuICAgIGxldCBib2FyZCA9IHN0YXRlLmJvYXJkXG4gICAgY29uc3QgYmVmb3JlID0gSlNPTi5zdHJpbmdpZnkoYm9hcmQpXG4gICAgYm9hcmQgPSBmbGlwVGlsZShib2FyZCwgaW5kZXgpXG4gICAgbGV0IG1vdmVzID0gc3RhdGUubW92ZXNcbiAgICBpZiAoSlNPTi5zdHJpbmdpZnkoYm9hcmQpICE9PSBiZWZvcmUpIG1vdmVzICs9IDFcbiAgICBcbiAgICBjb25zdCBvcGVuID0gZ2V0T3BlbkluZGljZXMoYm9hcmQpXG4gICAgY29uc3QgbWF0Y2hlZFBhaXJzID0gW11cbiAgICBmb3IgKGNvbnN0IHQgb2YgYm9hcmQpIGlmICh0Lm1hdGNoZWQpIG1hdGNoZWRQYWlycy5wdXNoKHQucGFpcklkKVxuICAgIGNvbnN0IG1hdGNoZWRTZXQgPSBBcnJheS5mcm9tKG5ldyBTZXQobWF0Y2hlZFBhaXJzKSlcbiAgICBcbiAgICBpZiAob3Blbi5sZW5ndGggPT09IDIpIHtcbiAgICAgIGNvbnN0IHVwZGF0ZWRfYXQgPSBub3dJc28oKVxuICAgICAgY29uc3Qgc0VyciA9IGF3YWl0IHVwc2VydEdhbWVTdGF0ZSh7IFxuICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLCBcbiAgICAgICAgYm9hcmQ6IHNlcmlhbGl6ZUJvYXJkKGJvYXJkKSwgXG4gICAgICAgIG1hdGNoZWQ6IG1hdGNoZWRTZXQsIFxuICAgICAgICBtb3ZlcywgXG4gICAgICAgIHRpbWVfc3RhcnRlZDogc3RhdGUudGltZV9zdGFydGVkLCBcbiAgICAgICAgdXBkYXRlZF9hdCBcbiAgICAgIH0pXG4gICAgICBpZiAoc0Vyci5lcnJvcikgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdkYiBlcnJvcicsIGRldGFpbDogc0Vyci5lcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGJvYXJkOiBzZXJpYWxpemVCb2FyZChib2FyZCksIG1hdGNoZWQ6IG1hdGNoZWRTZXQsIG1vdmVzLCBjb21wbGV0ZWQ6IGZhbHNlLCBuZWVkc19yZXNvbHV0aW9uOiB0cnVlIH0pXG4gICAgfVxuICAgIFxuICAgIGNvbnN0IGNvbXBsZXRlZCA9IGlzQ29tcGxldGVkKGJvYXJkKVxuICAgIGlmIChjb21wbGV0ZWQpIHtcbiAgICAgIGNvbnN0IGVuZCA9IG5vd0lzbygpXG4gICAgICBjb25zdCBzZWNzID0gZWxhcHNlZFNlY29uZHMoc3RhdGUudGltZV9zdGFydGVkLCBlbmQpXG4gICAgICBcbiAgICAgIC8vIEdldCBwcm9maWxlIGZvciB1c2VybmFtZVxuICAgICAgY29uc3QgeyBkYXRhOiBwcm9maWxlIH0gPSBhd2FpdCBnZXRQcm9maWxlKHVzZXIuaWQpXG4gICAgICBjb25zdCB1c2VybmFtZSA9IHByb2ZpbGU/LnVzZXJuYW1lIHx8ICdVbmtub3duJ1xuXG4gICAgICBjb25zdCByb3cgPSB7IFxuICAgICAgICB1c2VyX2lkOiB1c2VyLmlkLCBcbiAgICAgICAgdXNlcm5hbWUsIFxuICAgICAgICB3aW5zOiAxLCBcbiAgICAgICAgYmVzdF90aW1lOiBzZWNzLCBcbiAgICAgICAgYmVzdF9tb3ZlczogbW92ZXMsIFxuICAgICAgICBsYXN0X3BsYXllZDogZW5kIFxuICAgICAgfVxuICAgICAgXG4gICAgICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlU2VydmVyQ2xpZW50KClcbiAgICAgIGNvbnN0IHsgZGF0YTogcHJldiwgZXJyb3I6IHByZXZFcnIgfSA9IGF3YWl0IHN1cGFiYXNlLmZyb20oJ2xlYWRlcmJvYXJkJykuc2VsZWN0KCcqJykuZXEoJ3VzZXJfaWQnLCB1c2VyLmlkKS5tYXliZVNpbmdsZSgpXG4gICAgICBpZiAocHJldkVycikgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdkYiBlcnJvcicsIGRldGFpbDogcHJldkVyci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgICAgIFxuICAgICAgaWYgKHByZXYpIHtcbiAgICAgICAgcm93LndpbnMgPSAocHJldi53aW5zIHx8IDApICsgMVxuICAgICAgICByb3cuYmVzdF90aW1lID0gcHJldi5iZXN0X3RpbWUgPT0gbnVsbCA/IHNlY3MgOiBNYXRoLm1pbihwcmV2LmJlc3RfdGltZSwgc2VjcylcbiAgICAgICAgcm93LmJlc3RfbW92ZXMgPSBwcmV2LmJlc3RfbW92ZXMgPT0gbnVsbCA/IG1vdmVzIDogTWF0aC5taW4ocHJldi5iZXN0X21vdmVzLCBtb3ZlcylcbiAgICAgIH1cbiAgICAgIFxuICAgICAgY29uc3QgbEVyciA9IGF3YWl0IHVwc2VydExlYWRlcmJvYXJkUm93KHJvdylcbiAgICAgIGlmIChsRXJyLmVycm9yKSByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBlcnJvcjogJ2RiIGVycm9yJywgZGV0YWlsOiBsRXJyLmVycm9yLm1lc3NhZ2UgfSwgeyBzdGF0dXM6IDUwMCB9KVxuICAgICAgXG4gICAgICBjb25zdCBkRXJyID0gYXdhaXQgZGVsZXRlR2FtZVN0YXRlKHVzZXIuaWQpXG4gICAgICBpZiAoZEVyci5lcnJvcikgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgZXJyb3I6ICdkYiBlcnJvcicsIGRldGFpbDogZEVyci5lcnJvci5tZXNzYWdlIH0sIHsgc3RhdHVzOiA1MDAgfSlcbiAgICAgIFxuICAgICAgcmV0dXJuIE5leHRSZXNwb25zZS5qc29uKHsgYm9hcmQ6IHNlcmlhbGl6ZUJvYXJkKGJvYXJkKSwgbWF0Y2hlZDogbWF0Y2hlZFNldCwgbW92ZXMsIGNvbXBsZXRlZDogdHJ1ZSB9KVxuICAgIH0gZWxzZSB7XG4gICAgICBjb25zdCB1cGRhdGVkX2F0ID0gbm93SXNvKClcbiAgICAgIGNvbnN0IHNFcnIgPSBhd2FpdCB1cHNlcnRHYW1lU3RhdGUoeyBcbiAgICAgICAgdXNlcl9pZDogdXNlci5pZCwgXG4gICAgICAgIGJvYXJkOiBzZXJpYWxpemVCb2FyZChib2FyZCksIFxuICAgICAgICBtYXRjaGVkOiBtYXRjaGVkU2V0LCBcbiAgICAgICAgbW92ZXMsIFxuICAgICAgICB0aW1lX3N0YXJ0ZWQ6IHN0YXRlLnRpbWVfc3RhcnRlZCwgXG4gICAgICAgIHVwZGF0ZWRfYXQgXG4gICAgICB9KVxuICAgICAgaWYgKHNFcnIuZXJyb3IpIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnZGIgZXJyb3InLCBkZXRhaWw6IHNFcnIuZXJyb3IubWVzc2FnZSB9LCB7IHN0YXR1czogNTAwIH0pXG4gICAgICByZXR1cm4gTmV4dFJlc3BvbnNlLmpzb24oeyBib2FyZDogc2VyaWFsaXplQm9hcmQoYm9hcmQpLCBtYXRjaGVkOiBtYXRjaGVkU2V0LCBtb3ZlcywgY29tcGxldGVkOiBmYWxzZSB9KVxuICAgIH1cbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBOZXh0UmVzcG9uc2UuanNvbih7IGVycm9yOiAnYmFkIHJlcXVlc3QnIH0sIHsgc3RhdHVzOiA0MDAgfSlcbiAgfVxufSJdLCJuYW1lcyI6WyJkeW5hbWljIiwiTmV4dFJlc3BvbnNlIiwiZmxpcFRpbGUiLCJnZXRPcGVuSW5kaWNlcyIsImlzQ29tcGxldGVkIiwic2VyaWFsaXplQm9hcmQiLCJub3dJc28iLCJlbGFwc2VkU2Vjb25kcyIsImdldEdhbWVTdGF0ZSIsInVwc2VydEdhbWVTdGF0ZSIsImRlbGV0ZUdhbWVTdGF0ZSIsInVwc2VydExlYWRlcmJvYXJkUm93IiwiZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQiLCJnZXRVc2VyRnJvbVJlcSIsImdldFByb2ZpbGUiLCJQT1NUIiwicmVxIiwidXNlciIsImpzb24iLCJlcnJvciIsInN0YXR1cyIsImJvZHkiLCJpbmRleCIsIk51bWJlciIsImlzTmFOIiwiZGF0YSIsInN0YXRlIiwiaWQiLCJkZXRhaWwiLCJtZXNzYWdlIiwiYm9hcmQiLCJiZWZvcmUiLCJKU09OIiwic3RyaW5naWZ5IiwibW92ZXMiLCJvcGVuIiwibWF0Y2hlZFBhaXJzIiwidCIsIm1hdGNoZWQiLCJwdXNoIiwicGFpcklkIiwibWF0Y2hlZFNldCIsIkFycmF5IiwiZnJvbSIsIlNldCIsImxlbmd0aCIsInVwZGF0ZWRfYXQiLCJzRXJyIiwidXNlcl9pZCIsInRpbWVfc3RhcnRlZCIsImNvbXBsZXRlZCIsIm5lZWRzX3Jlc29sdXRpb24iLCJlbmQiLCJzZWNzIiwicHJvZmlsZSIsInVzZXJuYW1lIiwicm93Iiwid2lucyIsImJlc3RfdGltZSIsImJlc3RfbW92ZXMiLCJsYXN0X3BsYXllZCIsInN1cGFiYXNlIiwicHJldiIsInByZXZFcnIiLCJzZWxlY3QiLCJlcSIsIm1heWJlU2luZ2xlIiwiTWF0aCIsIm1pbiIsImxFcnIiLCJkRXJyIiwiZSJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./app/api/click/route.js\n");

/***/ }),

/***/ "(rsc)/./lib/board.js":
/*!**********************!*\
  !*** ./lib/board.js ***!
  \**********************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   checkMatch: () => (/* binding */ checkMatch),\n/* harmony export */   deserializeBoard: () => (/* binding */ deserializeBoard),\n/* harmony export */   flipTile: () => (/* binding */ flipTile),\n/* harmony export */   generateBoard: () => (/* binding */ generateBoard),\n/* harmony export */   getOpenIndices: () => (/* binding */ getOpenIndices),\n/* harmony export */   isCompleted: () => (/* binding */ isCompleted),\n/* harmony export */   serializeBoard: () => (/* binding */ serializeBoard),\n/* harmony export */   updateMatchedState: () => (/* binding */ updateMatchedState)\n/* harmony export */ });\n/* harmony import */ var _shuffle_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./shuffle.js */ \"(rsc)/./lib/shuffle.js\");\n\nfunction generateBoard(themeImages, pairCount = 8) {\n    // Ensure we don't ask for more pairs than we have images\n    const safePairCount = Math.min(pairCount, themeImages.length);\n    // Select a subset of images if needed\n    const selectedImages = themeImages.slice(0, safePairCount);\n    const pairs = [];\n    for(let i = 0; i < selectedImages.length; i++){\n        const img = selectedImages[i];\n        pairs.push({\n            pairId: i,\n            image: img,\n            visible: false,\n            matched: false\n        });\n        pairs.push({\n            pairId: i,\n            image: img,\n            visible: false,\n            matched: false\n        });\n    }\n    return (0,_shuffle_js__WEBPACK_IMPORTED_MODULE_0__.shuffle)(pairs);\n}\nfunction flipTile(board, index) {\n    const b = board.map((t)=>({\n            ...t\n        }));\n    const tile = b[index];\n    if (!tile) return b;\n    if (tile.matched || tile.visible) return b;\n    b[index].visible = true;\n    return b;\n}\nfunction checkMatch(board, firstIndex, secondIndex) {\n    if (firstIndex === secondIndex) return false;\n    const t1 = board[firstIndex];\n    const t2 = board[secondIndex];\n    if (!t1 || !t2) return false;\n    return t1.pairId === t2.pairId;\n}\nfunction getOpenIndices(board) {\n    const open = [];\n    for(let i = 0; i < board.length; i++){\n        const t = board[i];\n        if (t.visible && !t.matched) open.push(i);\n    }\n    return open;\n}\nfunction updateMatchedState(board) {\n    const b = board.map((t)=>({\n            ...t\n        }));\n    const open = getOpenIndices(b);\n    if (open.length === 2) {\n        const [i1, i2] = open;\n        if (checkMatch(b, i1, i2)) {\n            b[i1].matched = true;\n            b[i2].matched = true;\n        } else {\n            b[i1].visible = false;\n            b[i2].visible = false;\n        }\n    }\n    return b;\n}\nfunction isCompleted(board) {\n    for (const t of board)if (!t.matched) return false;\n    return true;\n}\nfunction serializeBoard(board) {\n    return board;\n}\nfunction deserializeBoard(json) {\n    return json;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDVDtBQUVPLFNBQVNrQixpQkFBaUJDLElBQUk7SUFDbkMsT0FBT0E7QUFDVCIsInNvdXJjZXMiOlsid2VicGFjazovL2NhcmR6eS8uL2xpYi9ib2FyZC5qcz9mNDY0Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IHNodWZmbGUgfSBmcm9tICcuL3NodWZmbGUuanMnXG5cbmV4cG9ydCBmdW5jdGlvbiBnZW5lcmF0ZUJvYXJkKHRoZW1lSW1hZ2VzLCBwYWlyQ291bnQgPSA4KSB7XG4gIC8vIEVuc3VyZSB3ZSBkb24ndCBhc2sgZm9yIG1vcmUgcGFpcnMgdGhhbiB3ZSBoYXZlIGltYWdlc1xuICBjb25zdCBzYWZlUGFpckNvdW50ID0gTWF0aC5taW4ocGFpckNvdW50LCB0aGVtZUltYWdlcy5sZW5ndGgpXG4gIC8vIFNlbGVjdCBhIHN1YnNldCBvZiBpbWFnZXMgaWYgbmVlZGVkXG4gIGNvbnN0IHNlbGVjdGVkSW1hZ2VzID0gdGhlbWVJbWFnZXMuc2xpY2UoMCwgc2FmZVBhaXJDb3VudClcbiAgXG4gIGNvbnN0IHBhaXJzID0gW11cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBzZWxlY3RlZEltYWdlcy5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IGltZyA9IHNlbGVjdGVkSW1hZ2VzW2ldXG4gICAgcGFpcnMucHVzaCh7IHBhaXJJZDogaSwgaW1hZ2U6IGltZywgdmlzaWJsZTogZmFsc2UsIG1hdGNoZWQ6IGZhbHNlIH0pXG4gICAgcGFpcnMucHVzaCh7IHBhaXJJZDogaSwgaW1hZ2U6IGltZywgdmlzaWJsZTogZmFsc2UsIG1hdGNoZWQ6IGZhbHNlIH0pXG4gIH1cbiAgcmV0dXJuIHNodWZmbGUocGFpcnMpXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBmbGlwVGlsZShib2FyZCwgaW5kZXgpIHtcbiAgY29uc3QgYiA9IGJvYXJkLm1hcCgodCkgPT4gKHsgLi4udCB9KSlcbiAgY29uc3QgdGlsZSA9IGJbaW5kZXhdXG4gIGlmICghdGlsZSkgcmV0dXJuIGJcbiAgaWYgKHRpbGUubWF0Y2hlZCB8fCB0aWxlLnZpc2libGUpIHJldHVybiBiXG4gIGJbaW5kZXhdLnZpc2libGUgPSB0cnVlXG4gIHJldHVybiBiXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBjaGVja01hdGNoKGJvYXJkLCBmaXJzdEluZGV4LCBzZWNvbmRJbmRleCkge1xuICBpZiAoZmlyc3RJbmRleCA9PT0gc2Vjb25kSW5kZXgpIHJldHVybiBmYWxzZVxuICBjb25zdCB0MSA9IGJvYXJkW2ZpcnN0SW5kZXhdXG4gIGNvbnN0IHQyID0gYm9hcmRbc2Vjb25kSW5kZXhdXG4gIGlmICghdDEgfHwgIXQyKSByZXR1cm4gZmFsc2VcbiAgcmV0dXJuIHQxLnBhaXJJZCA9PT0gdDIucGFpcklkXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBnZXRPcGVuSW5kaWNlcyhib2FyZCkge1xuICBjb25zdCBvcGVuID0gW11cbiAgZm9yIChsZXQgaSA9IDA7IGkgPCBib2FyZC5sZW5ndGg7IGkrKykge1xuICAgIGNvbnN0IHQgPSBib2FyZFtpXVxuICAgIGlmICh0LnZpc2libGUgJiYgIXQubWF0Y2hlZCkgb3Blbi5wdXNoKGkpXG4gIH1cbiAgcmV0dXJuIG9wZW5cbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHVwZGF0ZU1hdGNoZWRTdGF0ZShib2FyZCkge1xuICBjb25zdCBiID0gYm9hcmQubWFwKCh0KSA9PiAoeyAuLi50IH0pKVxuICBjb25zdCBvcGVuID0gZ2V0T3BlbkluZGljZXMoYilcbiAgaWYgKG9wZW4ubGVuZ3RoID09PSAyKSB7XG4gICAgY29uc3QgW2kxLCBpMl0gPSBvcGVuXG4gICAgaWYgKGNoZWNrTWF0Y2goYiwgaTEsIGkyKSkge1xuICAgICAgYltpMV0ubWF0Y2hlZCA9IHRydWVcbiAgICAgIGJbaTJdLm1hdGNoZWQgPSB0cnVlXG4gICAgfSBlbHNlIHtcbiAgICAgIGJbaTFdLnZpc2libGUgPSBmYWxzZVxuICAgICAgYltpMl0udmlzaWJsZSA9IGZhbHNlXG4gICAgfVxuICB9XG4gIHJldHVybiBiXG59XG5cbmV4cG9ydCBmdW5jdGlvbiBpc0NvbXBsZXRlZChib2FyZCkge1xuICBmb3IgKGNvbnN0IHQgb2YgYm9hcmQpIGlmICghdC5tYXRjaGVkKSByZXR1cm4gZmFsc2VcbiAgcmV0dXJuIHRydWVcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIHNlcmlhbGl6ZUJvYXJkKGJvYXJkKSB7XG4gIHJldHVybiBib2FyZFxufVxuXG5leHBvcnQgZnVuY3Rpb24gZGVzZXJpYWxpemVCb2FyZChqc29uKSB7XG4gIHJldHVybiBqc29uXG59Il0sIm5hbWVzIjpbInNodWZmbGUiLCJnZW5lcmF0ZUJvYXJkIiwidGhlbWVJbWFnZXMiLCJwYWlyQ291bnQiLCJzYWZlUGFpckNvdW50IiwiTWF0aCIsIm1pbiIsImxlbmd0aCIsInNlbGVjdGVkSW1hZ2VzIiwic2xpY2UiLCJwYWlycyIsImkiLCJpbWciLCJwdXNoIiwicGFpcklkIiwiaW1hZ2UiLCJ2aXNpYmxlIiwibWF0Y2hlZCIsImZsaXBUaWxlIiwiYm9hcmQiLCJpbmRleCIsImIiLCJtYXAiLCJ0IiwidGlsZSIsImNoZWNrTWF0Y2giLCJmaXJzdEluZGV4Iiwic2Vjb25kSW5kZXgiLCJ0MSIsInQyIiwiZ2V0T3BlbkluZGljZXMiLCJvcGVuIiwidXBkYXRlTWF0Y2hlZFN0YXRlIiwiaTEiLCJpMiIsImlzQ29tcGxldGVkIiwic2VyaWFsaXplQm9hcmQiLCJkZXNlcmlhbGl6ZUJvYXJkIiwianNvbiJdLCJzb3VyY2VSb290IjoiIn0=\n//# sourceURL=webpack-internal:///(rsc)/./lib/board.js\n");

/***/ }),

/***/ "(rsc)/./lib/helpers.js":
/*!************************!*\
  !*** ./lib/helpers.js ***!
  \************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   elapsedSeconds: () => (/* binding */ elapsedSeconds),\n/* harmony export */   nowIso: () => (/* binding */ nowIso)\n/* harmony export */ });\nfunction nowIso() {\n    return new Date().toISOString();\n}\nfunction elapsedSeconds(startIso, endIso) {\n    if (!startIso || !endIso) return 0;\n    const a = new Date(startIso).getTime();\n    const b = new Date(endIso).getTime();\n    if (Number.isNaN(a) || Number.isNaN(b)) return 0;\n    return Number(((b - a) / 1000).toFixed(2));\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvaGVscGVycy5qcyIsIm1hcHBpbmdzIjoiOzs7OztBQUFPLFNBQVNBO0lBQ2QsT0FBTyxJQUFJQyxPQUFPQyxXQUFXO0FBQy9CO0FBQ08sU0FBU0MsZUFBZUMsUUFBUSxFQUFFQyxNQUFNO0lBQzdDLElBQUksQ0FBQ0QsWUFBWSxDQUFDQyxRQUFRLE9BQU87SUFDakMsTUFBTUMsSUFBSSxJQUFJTCxLQUFLRyxVQUFVRyxPQUFPO0lBQ3BDLE1BQU1DLElBQUksSUFBSVAsS0FBS0ksUUFBUUUsT0FBTztJQUNsQyxJQUFJRSxPQUFPQyxLQUFLLENBQUNKLE1BQU1HLE9BQU9DLEtBQUssQ0FBQ0YsSUFBSSxPQUFPO0lBQy9DLE9BQU9DLE9BQU8sQ0FBQyxDQUFDRCxJQUFJRixDQUFBQSxJQUFLLElBQUcsRUFBR0ssT0FBTyxDQUFDO0FBQ3pDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vY2FyZHp5Ly4vbGliL2hlbHBlcnMuanM/ZjUwNSJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZnVuY3Rpb24gbm93SXNvKCkge1xuICByZXR1cm4gbmV3IERhdGUoKS50b0lTT1N0cmluZygpXG59XG5leHBvcnQgZnVuY3Rpb24gZWxhcHNlZFNlY29uZHMoc3RhcnRJc28sIGVuZElzbykge1xuICBpZiAoIXN0YXJ0SXNvIHx8ICFlbmRJc28pIHJldHVybiAwXG4gIGNvbnN0IGEgPSBuZXcgRGF0ZShzdGFydElzbykuZ2V0VGltZSgpXG4gIGNvbnN0IGIgPSBuZXcgRGF0ZShlbmRJc28pLmdldFRpbWUoKVxuICBpZiAoTnVtYmVyLmlzTmFOKGEpIHx8IE51bWJlci5pc05hTihiKSkgcmV0dXJuIDBcbiAgcmV0dXJuIE51bWJlcigoKGIgLSBhKSAvIDEwMDApLnRvRml4ZWQoMikpXG59Il0sIm5hbWVzIjpbIm5vd0lzbyIsIkRhdGUiLCJ0b0lTT1N0cmluZyIsImVsYXBzZWRTZWNvbmRzIiwic3RhcnRJc28iLCJlbmRJc28iLCJhIiwiZ2V0VGltZSIsImIiLCJOdW1iZXIiLCJpc05hTiIsInRvRml4ZWQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/helpers.js\n");

/***/ }),

/***/ "(rsc)/./lib/shuffle.js":
/*!************************!*\
  !*** ./lib/shuffle.js ***!
  \************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   shuffle: () => (/* binding */ shuffle)\n/* harmony export */ });\nfunction shuffle(arr) {\n    const a = arr.slice();\n    for(let i = a.length - 1; i > 0; i--){\n        const j = Math.floor(Math.random() * (i + 1));\n        const t = a[i];\n        a[i] = a[j];\n        a[j] = t;\n    }\n    return a;\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc2h1ZmZsZS5qcyIsIm1hcHBpbmdzIjoiOzs7O0FBQU8sU0FBU0EsUUFBUUMsR0FBRztJQUN6QixNQUFNQyxJQUFJRCxJQUFJRSxLQUFLO0lBQ25CLElBQUssSUFBSUMsSUFBSUYsRUFBRUcsTUFBTSxHQUFHLEdBQUdELElBQUksR0FBR0EsSUFBSztRQUNyQyxNQUFNRSxJQUFJQyxLQUFLQyxLQUFLLENBQUNELEtBQUtFLE1BQU0sS0FBTUwsQ0FBQUEsSUFBSTtRQUMxQyxNQUFNTSxJQUFJUixDQUFDLENBQUNFLEVBQUU7UUFDZEYsQ0FBQyxDQUFDRSxFQUFFLEdBQUdGLENBQUMsQ0FBQ0ksRUFBRTtRQUNYSixDQUFDLENBQUNJLEVBQUUsR0FBR0k7SUFDVDtJQUNBLE9BQU9SO0FBQ1QiLCJzb3VyY2VzIjpbIndlYnBhY2s6Ly9jYXJkenkvLi9saWIvc2h1ZmZsZS5qcz80MTAzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBmdW5jdGlvbiBzaHVmZmxlKGFycikge1xuICBjb25zdCBhID0gYXJyLnNsaWNlKClcbiAgZm9yIChsZXQgaSA9IGEubGVuZ3RoIC0gMTsgaSA+IDA7IGktLSkge1xuICAgIGNvbnN0IGogPSBNYXRoLmZsb29yKE1hdGgucmFuZG9tKCkgKiAoaSArIDEpKVxuICAgIGNvbnN0IHQgPSBhW2ldXG4gICAgYVtpXSA9IGFbal1cbiAgICBhW2pdID0gdFxuICB9XG4gIHJldHVybiBhXG59Il0sIm5hbWVzIjpbInNodWZmbGUiLCJhcnIiLCJhIiwic2xpY2UiLCJpIiwibGVuZ3RoIiwiaiIsIk1hdGgiLCJmbG9vciIsInJhbmRvbSIsInQiXSwic291cmNlUm9vdCI6IiJ9\n//# sourceURL=webpack-internal:///(rsc)/./lib/shuffle.js\n");

/***/ }),

/***/ "(rsc)/./lib/supabase.js":
/*!*************************!*\
  !*** ./lib/supabase.js ***!
  \*************************/
/***/ ((__unused_webpack___webpack_module__, __webpack_exports__, __webpack_require__) => {

eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export */ __webpack_require__.d(__webpack_exports__, {\n/* harmony export */   deleteGameState: () => (/* binding */ deleteGameState),\n/* harmony export */   getGameState: () => (/* binding */ getGameState),\n/* harmony export */   getLeaderboardRows: () => (/* binding */ getLeaderboardRows),\n/* harmony export */   getProfile: () => (/* binding */ getProfile),\n/* harmony export */   getSupabaseServerClient: () => (/* binding */ getSupabaseServerClient),\n/* harmony export */   getUserFromReq: () => (/* binding */ getUserFromReq),\n/* harmony export */   upsertGameState: () => (/* binding */ upsertGameState),\n/* harmony export */   upsertLeaderboardRow: () => (/* binding */ upsertLeaderboardRow)\n/* harmony export */ });\n/* harmony import */ var _supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @supabase/supabase-js */ \"(rsc)/./node_modules/@supabase/supabase-js/dist/module/index.js\");\n\nfunction getSupabaseServerClient() {\n    const url = process.env.SUPABASE_URL;\n    const key = process.env.SUPABASE_SERVICE_ROLE;\n    if (!url || !key) throw new Error(\"Supabase env missing\");\n    return (0,_supabase_supabase_js__WEBPACK_IMPORTED_MODULE_0__.createClient)(url, key, {\n        auth: {\n            autoRefreshToken: false,\n            persistSession: false\n        }\n    });\n}\nasync function getUserFromReq(req) {\n    const authHeader = req.headers.get(\"Authorization\");\n    if (!authHeader) return null;\n    const token = authHeader.replace(\"Bearer \", \"\");\n    const supabase = getSupabaseServerClient();\n    const { data: { user }, error } = await supabase.auth.getUser(token);\n    if (error || !user) return null;\n    return user;\n}\n// 'player' argument is now 'user_id' (uuid)\nasync function getGameState(userId) {\n    const supabase = getSupabaseServerClient();\n    return await supabase.from(\"game_state\").select(\"*\").eq(\"user_id\", userId).maybeSingle();\n}\nasync function upsertGameState(state) {\n    const supabase = getSupabaseServerClient();\n    // state must have user_id\n    return await supabase.from(\"game_state\").upsert(state, {\n        onConflict: \"user_id\"\n    });\n}\nasync function deleteGameState(userId) {\n    const supabase = getSupabaseServerClient();\n    return await supabase.from(\"game_state\").delete().eq(\"user_id\", userId);\n}\nasync function getLeaderboardRows() {\n    const supabase = getSupabaseServerClient();\n    // Returns rows with username and stats\n    return await supabase.from(\"leaderboard\").select(\"*\").order(\"wins\", {\n        ascending: false\n    }).limit(50);\n}\nasync function upsertLeaderboardRow(row) {\n    const supabase = getSupabaseServerClient();\n    return await supabase.from(\"leaderboard\").upsert(row, {\n        onConflict: \"user_id\"\n    });\n}\nasync function getProfile(userId) {\n    const supabase = getSupabaseServerClient();\n    return await supabase.from(\"profiles\").select(\"username\").eq(\"id\", userId).single();\n}\n//# sourceURL=[module]\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiKHJzYykvLi9saWIvc3VwYWJhc2UuanMiLCJtYXBwaW5ncyI6Ijs7Ozs7Ozs7Ozs7O0FBQW9EO0FBRTdDLFNBQVNDO0lBQ2QsTUFBTUMsTUFBTUMsUUFBUUMsR0FBRyxDQUFDQyxZQUFZO0lBQ3BDLE1BQU1DLE1BQU1ILFFBQVFDLEdBQUcsQ0FBQ0cscUJBQXFCO0lBQzdDLElBQUksQ0FBQ0wsT0FBTyxDQUFDSSxLQUFLLE1BQU0sSUFBSUUsTUFBTTtJQUNsQyxPQUFPUixtRUFBWUEsQ0FBQ0UsS0FBS0ksS0FBSztRQUFFRyxNQUFNO1lBQUVDLGtCQUFrQjtZQUFPQyxnQkFBZ0I7UUFBTTtJQUFFO0FBQzNGO0FBRU8sZUFBZUMsZUFBZUMsR0FBRztJQUN0QyxNQUFNQyxhQUFhRCxJQUFJRSxPQUFPLENBQUNDLEdBQUcsQ0FBQztJQUNuQyxJQUFJLENBQUNGLFlBQVksT0FBTztJQUV4QixNQUFNRyxRQUFRSCxXQUFXSSxPQUFPLENBQUMsV0FBVztJQUM1QyxNQUFNQyxXQUFXbEI7SUFDakIsTUFBTSxFQUFFbUIsTUFBTSxFQUFFQyxJQUFJLEVBQUUsRUFBRUMsS0FBSyxFQUFFLEdBQUcsTUFBTUgsU0FBU1YsSUFBSSxDQUFDYyxPQUFPLENBQUNOO0lBRTlELElBQUlLLFNBQVMsQ0FBQ0QsTUFBTSxPQUFPO0lBQzNCLE9BQU9BO0FBQ1Q7QUFFQSw0Q0FBNEM7QUFDckMsZUFBZUcsYUFBYUMsTUFBTTtJQUN2QyxNQUFNTixXQUFXbEI7SUFDakIsT0FBTyxNQUFNa0IsU0FBU08sSUFBSSxDQUFDLGNBQWNDLE1BQU0sQ0FBQyxLQUFLQyxFQUFFLENBQUMsV0FBV0gsUUFBUUksV0FBVztBQUN4RjtBQUVPLGVBQWVDLGdCQUFnQkMsS0FBSztJQUN6QyxNQUFNWixXQUFXbEI7SUFDakIsMEJBQTBCO0lBQzFCLE9BQU8sTUFBTWtCLFNBQVNPLElBQUksQ0FBQyxjQUFjTSxNQUFNLENBQUNELE9BQU87UUFBRUUsWUFBWTtJQUFVO0FBQ2pGO0FBRU8sZUFBZUMsZ0JBQWdCVCxNQUFNO0lBQzFDLE1BQU1OLFdBQVdsQjtJQUNqQixPQUFPLE1BQU1rQixTQUFTTyxJQUFJLENBQUMsY0FBY1MsTUFBTSxHQUFHUCxFQUFFLENBQUMsV0FBV0g7QUFDbEU7QUFFTyxlQUFlVztJQUNwQixNQUFNakIsV0FBV2xCO0lBQ2pCLHVDQUF1QztJQUN2QyxPQUFPLE1BQU1rQixTQUFTTyxJQUFJLENBQUMsZUFBZUMsTUFBTSxDQUFDLEtBQUtVLEtBQUssQ0FBQyxRQUFRO1FBQUVDLFdBQVc7SUFBTSxHQUFHQyxLQUFLLENBQUM7QUFDbEc7QUFFTyxlQUFlQyxxQkFBcUJDLEdBQUc7SUFDNUMsTUFBTXRCLFdBQVdsQjtJQUNqQixPQUFPLE1BQU1rQixTQUFTTyxJQUFJLENBQUMsZUFBZU0sTUFBTSxDQUFDUyxLQUFLO1FBQUVSLFlBQVk7SUFBVTtBQUNoRjtBQUVPLGVBQWVTLFdBQVdqQixNQUFNO0lBQ3JDLE1BQU1OLFdBQVdsQjtJQUNqQixPQUFPLE1BQU1rQixTQUFTTyxJQUFJLENBQUMsWUFBWUMsTUFBTSxDQUFDLFlBQVlDLEVBQUUsQ0FBQyxNQUFNSCxRQUFRa0IsTUFBTTtBQUNuRiIsInNvdXJjZXMiOlsid2VicGFjazovL2NhcmR6eS8uL2xpYi9zdXBhYmFzZS5qcz8xNTk4Il0sInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IGNyZWF0ZUNsaWVudCB9IGZyb20gJ0BzdXBhYmFzZS9zdXBhYmFzZS1qcydcblxuZXhwb3J0IGZ1bmN0aW9uIGdldFN1cGFiYXNlU2VydmVyQ2xpZW50KCkge1xuICBjb25zdCB1cmwgPSBwcm9jZXNzLmVudi5TVVBBQkFTRV9VUkxcbiAgY29uc3Qga2V5ID0gcHJvY2Vzcy5lbnYuU1VQQUJBU0VfU0VSVklDRV9ST0xFXG4gIGlmICghdXJsIHx8ICFrZXkpIHRocm93IG5ldyBFcnJvcignU3VwYWJhc2UgZW52IG1pc3NpbmcnKVxuICByZXR1cm4gY3JlYXRlQ2xpZW50KHVybCwga2V5LCB7IGF1dGg6IHsgYXV0b1JlZnJlc2hUb2tlbjogZmFsc2UsIHBlcnNpc3RTZXNzaW9uOiBmYWxzZSB9IH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBnZXRVc2VyRnJvbVJlcShyZXEpIHtcbiAgY29uc3QgYXV0aEhlYWRlciA9IHJlcS5oZWFkZXJzLmdldCgnQXV0aG9yaXphdGlvbicpXG4gIGlmICghYXV0aEhlYWRlcikgcmV0dXJuIG51bGxcbiAgXG4gIGNvbnN0IHRva2VuID0gYXV0aEhlYWRlci5yZXBsYWNlKCdCZWFyZXIgJywgJycpXG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQoKVxuICBjb25zdCB7IGRhdGE6IHsgdXNlciB9LCBlcnJvciB9ID0gYXdhaXQgc3VwYWJhc2UuYXV0aC5nZXRVc2VyKHRva2VuKVxuICBcbiAgaWYgKGVycm9yIHx8ICF1c2VyKSByZXR1cm4gbnVsbFxuICByZXR1cm4gdXNlclxufVxuXG4vLyAncGxheWVyJyBhcmd1bWVudCBpcyBub3cgJ3VzZXJfaWQnICh1dWlkKVxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIGdldEdhbWVTdGF0ZSh1c2VySWQpIHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZVNlcnZlckNsaWVudCgpXG4gIHJldHVybiBhd2FpdCBzdXBhYmFzZS5mcm9tKCdnYW1lX3N0YXRlJykuc2VsZWN0KCcqJykuZXEoJ3VzZXJfaWQnLCB1c2VySWQpLm1heWJlU2luZ2xlKClcbn1cblxuZXhwb3J0IGFzeW5jIGZ1bmN0aW9uIHVwc2VydEdhbWVTdGF0ZShzdGF0ZSkge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlU2VydmVyQ2xpZW50KClcbiAgLy8gc3RhdGUgbXVzdCBoYXZlIHVzZXJfaWRcbiAgcmV0dXJuIGF3YWl0IHN1cGFiYXNlLmZyb20oJ2dhbWVfc3RhdGUnKS51cHNlcnQoc3RhdGUsIHsgb25Db25mbGljdDogJ3VzZXJfaWQnIH0pXG59XG5cbmV4cG9ydCBhc3luYyBmdW5jdGlvbiBkZWxldGVHYW1lU3RhdGUodXNlcklkKSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQoKVxuICByZXR1cm4gYXdhaXQgc3VwYWJhc2UuZnJvbSgnZ2FtZV9zdGF0ZScpLmRlbGV0ZSgpLmVxKCd1c2VyX2lkJywgdXNlcklkKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0TGVhZGVyYm9hcmRSb3dzKCkge1xuICBjb25zdCBzdXBhYmFzZSA9IGdldFN1cGFiYXNlU2VydmVyQ2xpZW50KClcbiAgLy8gUmV0dXJucyByb3dzIHdpdGggdXNlcm5hbWUgYW5kIHN0YXRzXG4gIHJldHVybiBhd2FpdCBzdXBhYmFzZS5mcm9tKCdsZWFkZXJib2FyZCcpLnNlbGVjdCgnKicpLm9yZGVyKCd3aW5zJywgeyBhc2NlbmRpbmc6IGZhbHNlIH0pLmxpbWl0KDUwKVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gdXBzZXJ0TGVhZGVyYm9hcmRSb3cocm93KSB7XG4gIGNvbnN0IHN1cGFiYXNlID0gZ2V0U3VwYWJhc2VTZXJ2ZXJDbGllbnQoKVxuICByZXR1cm4gYXdhaXQgc3VwYWJhc2UuZnJvbSgnbGVhZGVyYm9hcmQnKS51cHNlcnQocm93LCB7IG9uQ29uZmxpY3Q6ICd1c2VyX2lkJyB9KVxufVxuXG5leHBvcnQgYXN5bmMgZnVuY3Rpb24gZ2V0UHJvZmlsZSh1c2VySWQpIHtcbiAgY29uc3Qgc3VwYWJhc2UgPSBnZXRTdXBhYmFzZVNlcnZlckNsaWVudCgpXG4gIHJldHVybiBhd2FpdCBzdXBhYmFzZS5mcm9tKCdwcm9maWxlcycpLnNlbGVjdCgndXNlcm5hbWUnKS5lcSgnaWQnLCB1c2VySWQpLnNpbmdsZSgpXG59Il0sIm5hbWVzIjpbImNyZWF0ZUNsaWVudCIsImdldFN1cGFiYXNlU2VydmVyQ2xpZW50IiwidXJsIiwicHJvY2VzcyIsImVudiIsIlNVUEFCQVNFX1VSTCIsImtleSIsIlNVUEFCQVNFX1NFUlZJQ0VfUk9MRSIsIkVycm9yIiwiYXV0aCIsImF1dG9SZWZyZXNoVG9rZW4iLCJwZXJzaXN0U2Vzc2lvbiIsImdldFVzZXJGcm9tUmVxIiwicmVxIiwiYXV0aEhlYWRlciIsImhlYWRlcnMiLCJnZXQiLCJ0b2tlbiIsInJlcGxhY2UiLCJzdXBhYmFzZSIsImRhdGEiLCJ1c2VyIiwiZXJyb3IiLCJnZXRVc2VyIiwiZ2V0R2FtZVN0YXRlIiwidXNlcklkIiwiZnJvbSIsInNlbGVjdCIsImVxIiwibWF5YmVTaW5nbGUiLCJ1cHNlcnRHYW1lU3RhdGUiLCJzdGF0ZSIsInVwc2VydCIsIm9uQ29uZmxpY3QiLCJkZWxldGVHYW1lU3RhdGUiLCJkZWxldGUiLCJnZXRMZWFkZXJib2FyZFJvd3MiLCJvcmRlciIsImFzY2VuZGluZyIsImxpbWl0IiwidXBzZXJ0TGVhZGVyYm9hcmRSb3ciLCJyb3ciLCJnZXRQcm9maWxlIiwic2luZ2xlIl0sInNvdXJjZVJvb3QiOiIifQ==\n//# sourceURL=webpack-internal:///(rsc)/./lib/supabase.js\n");

/***/ })

};
;

// load runtime
var __webpack_require__ = require("../../../webpack-runtime.js");
__webpack_require__.C(exports);
var __webpack_exec__ = (moduleId) => (__webpack_require__(__webpack_require__.s = moduleId))
var __webpack_exports__ = __webpack_require__.X(0, ["vendor-chunks/@supabase","vendor-chunks/next","vendor-chunks/tslib"], () => (__webpack_exec__("(rsc)/./node_modules/next/dist/build/webpack/loaders/next-app-loader.js?name=app%2Fapi%2Fclick%2Froute&page=%2Fapi%2Fclick%2Froute&appPaths=&pagePath=private-next-app-dir%2Fapi%2Fclick%2Froute.js&appDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Ccardzy%5Capp&pageExtensions=tsx&pageExtensions=ts&pageExtensions=jsx&pageExtensions=js&rootDir=C%3A%5CUsers%5CLENOVO%5CDesktop%5Ccardzy&isDev=true&tsconfigPath=tsconfig.json&basePath=&assetPrefix=&nextConfigOutput=&preferredRegion=&middlewareConfig=e30%3D!")));
module.exports = __webpack_exports__;

})();